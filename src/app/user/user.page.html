<ion-content>

  <ion-card *ngIf="auth.user$ | async as user; else noUser">
    <ion-card-header color="primary">
      <ion-icon (click)="showColorPopover()" name="color-palette-outline" style="position: absolute; z-index: 20; top: 10px; right: 10px; font-size: 32px;"></ion-icon>
      <ion-card-subtitle>{{ user.job }} {{ user.company }}</ion-card-subtitle>
      <ion-card-title>{{ user.username }}</ion-card-title>
      <span style="position: absolute; bottom: 10px; right: 10px;">{{ user.posts }} {{ user.posts == 0 || user.posts > 1 ? 'posts' : 'post' }}</span>
    </ion-card-header>
    <br>
    <ion-card-content>
      <ion-item lines="none">
        <ion-toggle [(ngModel)]="darkMode" (ngModelChange)="darkToggle()" slot="start"></ion-toggle>
        <ion-label>Dark Mode</ion-label>
      </ion-item>
      <ion-item lines="none" (click)="editInfo()">
        <ion-label>Edit Info</ion-label>
        <ion-icon name="chevron-forward" slot="end"></ion-icon>
      </ion-item>
      <ion-item lines="none" (click)="viewPosts(user.uid)">
        <ion-label>View Your Posts</ion-label>
        <ion-icon name="chevron-forward" slot="end"></ion-icon>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <ng-template #noUser>
    <div style="text-align: center;">
      <h4 style="margin: 2em auto;">Login to interact with the community</h4>

      <ion-button expand="block" fill="outline" (click)="auth.login()">
        Login Anonymously
        <ion-icon name="log-in-outline" slot="end"></ion-icon>
      </ion-button>
    </div>
  </ng-template>

  <ion-card>
    <ion-card-content>
      <br>
      <p style="text-align: center">Advertisement</p>
      <br>
    </ion-card-content>
  </ion-card>

  <ion-list>
    <ion-item>
      <ion-label>Share</ion-label>
      <ion-icon slot="end" name="share-social-outline"></ion-icon>
    </ion-item>

    <ion-item routerLink="/about">
      <ion-label>About This App</ion-label>
    </ion-item>

    <ion-item routerLink="/privacy">
      <ion-label>Privacy Policy</ion-label>
    </ion-item>
  
    <ion-item routerLink="/terms">
      <ion-label>Terms of Service</ion-label>
    </ion-item>
  </ion-list>

  <!-- <ion-button *ngIf="auth.user$ | async" (click)="auth.logout()" expand="block" style="margin: 2em auto">Logout</ion-button> -->

</ion-content>
